<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - EclipseAI Platform</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r158/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</head>
<body class="login-body">
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>EclipseAI</h2>
                <p class="tagline">Shaping Smarter Solutions.</p>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="demo.html" class="nav-link">Demo</a>
                <a href="#features" class="nav-link">Features</a>
                <a href="#pricing" class="nav-link">Pricing</a>
                <a href="#contact" class="nav-link">Contact</a>
                <a href="login.html" class="nav-link">Sign In</a>
            </div>
            <div class="hamburger" id="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>
    
    <!-- Mobile sidebar backdrop -->
    <div class="nav-backdrop" id="nav-backdrop"></div>

    <!-- Signup Section -->
    <section class="login-section" id="signup">
        <canvas id="hero-canvas" class="hero-canvas"></canvas>
        <canvas id="fluid-waves" class="fluid-waves-canvas"></canvas>
        
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <div class="logo-container">
                        <div class="logo-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h1>EclipseAI</h1>
                        <p class="login-tagline">Create your account and start your AI journey</p>
                    </div>
                </div>
                
                <form class="login-form" id="signupForm">
                    <div class="form-group">
                        <label for="firstName" class="form-label">First Name</label>
                        <div class="input-container">
                            <i class="fas fa-user input-icon"></i>
                            <input 
                                type="text" 
                                id="firstName" 
                                name="firstName" 
                                class="form-input" 
                                placeholder="Enter your first name"
                                required
                                autocomplete="given-name"
                            >
                        </div>
                        <div class="input-error" id="firstNameError"></div>
                    </div>

                    <div class="form-group">
                        <label for="lastName" class="form-label">Last Name</label>
                        <div class="input-container">
                            <i class="fas fa-user input-icon"></i>
                            <input 
                                type="text" 
                                id="lastName" 
                                name="lastName" 
                                class="form-input" 
                                placeholder="Enter your last name"
                                required
                                autocomplete="family-name"
                            >
                        </div>
                        <div class="input-error" id="lastNameError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email" class="form-label">Email Address</label>
                        <div class="input-container">
                            <i class="fas fa-envelope input-icon"></i>
                            <input 
                                type="email" 
                                id="email" 
                                name="email" 
                                class="form-input" 
                                placeholder="Enter your email"
                                required
                                autocomplete="email"
                            >
                        </div>
                        <div class="input-error" id="emailError"></div>
                    </div>

                    <div class="form-group">
                        <label for="company" class="form-label">Company (Optional)</label>
                        <div class="input-container">
                            <i class="fas fa-building input-icon"></i>
                            <input 
                                type="text" 
                                id="company" 
                                name="company" 
                                class="form-input" 
                                placeholder="Enter your company name"
                                autocomplete="organization"
                            >
                        </div>
                        <div class="input-error" id="companyError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="password" class="form-label">Password</label>
                        <div class="input-container">
                            <i class="fas fa-lock input-icon"></i>
                            <input 
                                type="password" 
                                id="password" 
                                name="password" 
                                class="form-input" 
                                placeholder="Create a password"
                                required
                                autocomplete="new-password"
                            >
                            <button type="button" class="password-toggle" id="passwordToggle">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="input-error" id="passwordError"></div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword" class="form-label">Confirm Password</label>
                        <div class="input-container">
                            <i class="fas fa-lock input-icon"></i>
                            <input 
                                type="password" 
                                id="confirmPassword" 
                                name="confirmPassword" 
                                class="form-input" 
                                placeholder="Confirm your password"
                                required
                                autocomplete="new-password"
                            >
                            <button type="button" class="password-toggle" id="confirmPasswordToggle">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="input-error" id="confirmPasswordError"></div>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-container">
                            <input type="checkbox" id="agreeTerms" name="agreeTerms" required>
                            <span class="checkmark"></span>
                            <span class="checkbox-label">I agree to the <a href="#terms" class="forgot-link">Terms of Service</a> and <a href="#privacy" class="forgot-link">Privacy Policy</a></span>
                        </label>
                    </div>

                    <div class="form-options">
                        <label class="checkbox-container">
                            <input type="checkbox" id="newsletter" name="newsletter">
                            <span class="checkmark"></span>
                            <span class="checkbox-label">Subscribe to our newsletter for updates and tips</span>
                        </label>
                    </div>
                    
                    <button type="submit" class="login-btn" id="signupBtn">
                        <span class="btn-text">Create Account</span>
                        <div class="btn-loader" id="btnLoader">
                            <div class="spinner"></div>
                        </div>
                    </button>
                    
                    <div class="divider">
                        <span class="divider-text">or continue with</span>
                    </div>
                    
                    <div class="social-login">
                        <button type="button" class="social-btn google-btn">
                            <i class="fab fa-google"></i>
                            <span>Google</span>
                        </button>
                        <button type="button" class="social-btn microsoft-btn">
                            <i class="fab fa-microsoft"></i>
                            <span>Microsoft</span>
                        </button>
                    </div>
                    
                    <div class="signup-link">
                        <p>Already have an account? <a href="login.html" class="signup-link-text">Sign in here</a></p>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Background Elements -->
        <div class="floating-elements">
            <div class="floating-icon icon-1">
                <i class="fas fa-user-plus"></i>
            </div>
            <div class="floating-icon icon-2">
                <i class="fas fa-rocket"></i>
            </div>
            <div class="floating-icon icon-3">
                <i class="fas fa-shield-alt"></i>
            </div>
            <div class="floating-icon icon-4">
                <i class="fas fa-bolt"></i>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" id="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>EclipseAI</h3>
                    <p>Shaping smarter solutions for tomorrow's challenges.</p>
                </div>
                <div class="footer-section">
                    <h4>Product</h4>
                    <ul>
                        <li><a href="demo.html">Features</a></li>
                        <li><a href="#">Pricing</a></li>
                        <li><a href="#">Integrations</a></li>
                        <li><a href="#">API</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <ul>
                        <li><a href="index.html">About</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#">Documentation</a></li>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Community</a></li>
                        <li><a href="#">Status</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 EclipseAI. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>


        // API Configuration
        const API_BASE_URL = 'http://localhost:4000/api';

        // Signup page specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            const signupForm = document.getElementById('signupForm');
            const signupBtn = document.getElementById('signupBtn');
            const btnLoader = document.getElementById('btnLoader');
            const btnText = document.querySelector('.btn-text');
            const passwordToggle = document.getElementById('passwordToggle');
            const confirmPasswordToggle = document.getElementById('confirmPasswordToggle');
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirmPassword');
            const firstNameInput = document.getElementById('firstName');
            const lastNameInput = document.getElementById('lastName');
            const emailInput = document.getElementById('email');
            const companyInput = document.getElementById('company');
            const agreeTermsInput = document.getElementById('agreeTerms');
            
            // Error elements
            const firstNameError = document.getElementById('firstNameError');
            const lastNameError = document.getElementById('lastNameError');
            const emailError = document.getElementById('emailError');
            const companyError = document.getElementById('companyError');
            const passwordError = document.getElementById('passwordError');
            const confirmPasswordError = document.getElementById('confirmPasswordError');

            // Password toggle functionality
            passwordToggle.addEventListener('click', function() {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                
                const icon = this.querySelector('i');
                icon.classList.toggle('fa-eye');
                icon.classList.toggle('fa-eye-slash');
            });

            confirmPasswordToggle.addEventListener('click', function() {
                const type = confirmPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                confirmPasswordInput.setAttribute('type', type);
                
                const icon = this.querySelector('i');
                icon.classList.toggle('fa-eye');
                icon.classList.toggle('fa-eye-slash');
            });

            // Form validation
            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }

            function validatePassword(password) {
                return password.length >= 8;
            }

            function validateName(name) {
                return name.trim().length >= 2;
            }

            function showError(element, message) {
                element.textContent = message;
                element.style.opacity = '1';
                element.style.transform = 'translateY(0)';
            }

            function hideError(element) {
                element.style.opacity = '0';
                element.style.transform = 'translateY(-10px)';
            }

            // Real-time validation
            firstNameInput.addEventListener('input', function() {
                if (this.value && !validateName(this.value)) {
                    showError(firstNameError, 'First name must be at least 2 characters');
                } else {
                    hideError(firstNameError);
                }
            });

            lastNameInput.addEventListener('input', function() {
                if (this.value && !validateName(this.value)) {
                    showError(lastNameError, 'Last name must be at least 2 characters');
                } else {
                    hideError(lastNameError);
                }
            });

            emailInput.addEventListener('input', function() {
                if (this.value && !validateEmail(this.value)) {
                    showError(emailError, 'Please enter a valid email address');
                } else {
                    hideError(emailError);
                }
            });

            passwordInput.addEventListener('input', function() {
                if (this.value && !validatePassword(this.value)) {
                    showError(passwordError, 'Password must be at least 8 characters long');
                } else {
                    hideError(passwordError);
                }
                
                // Check password confirmation if it has a value
                if (confirmPasswordInput.value) {
                    if (this.value !== confirmPasswordInput.value) {
                        showError(confirmPasswordError, 'Passwords do not match');
                    } else {
                        hideError(confirmPasswordError);
                    }
                }
            });

            confirmPasswordInput.addEventListener('input', function() {
                if (this.value && passwordInput.value !== this.value) {
                    showError(confirmPasswordError, 'Passwords do not match');
                } else {
                    hideError(confirmPasswordError);
                }
            });

            // Form submission
            signupForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const firstName = firstNameInput.value.trim();
                const lastName = lastNameInput.value.trim();
                const email = emailInput.value.trim();
                const company = companyInput.value.trim();
                const password = passwordInput.value;
                const confirmPassword = confirmPasswordInput.value;
                const agreeTerms = agreeTermsInput.checked;
                
                // Clear previous errors
                hideError(firstNameError);
                hideError(lastNameError);
                hideError(emailError);
                hideError(companyError);
                hideError(passwordError);
                hideError(confirmPasswordError);
                
                // Validate form
                let isValid = true;
                
                if (!firstName) {
                    showError(firstNameError, 'First name is required');
                    isValid = false;
                } else if (!validateName(firstName)) {
                    showError(firstNameError, 'First name must be at least 2 characters');
                    isValid = false;
                }
                
                if (!lastName) {
                    showError(lastNameError, 'Last name is required');
                    isValid = false;
                } else if (!validateName(lastName)) {
                    showError(lastNameError, 'Last name must be at least 2 characters');
                    isValid = false;
                }
                
                if (!email) {
                    showError(emailError, 'Email is required');
                    isValid = false;
                } else if (!validateEmail(email)) {
                    showError(emailError, 'Please enter a valid email address');
                    isValid = false;
                }
                
                if (!password) {
                    showError(passwordError, 'Password is required');
                    isValid = false;
                } else if (!validatePassword(password)) {
                    showError(passwordError, 'Password must be at least 8 characters long');
                    isValid = false;
                }
                
                if (!confirmPassword) {
                    showError(confirmPasswordError, 'Please confirm your password');
                    isValid = false;
                } else if (password !== confirmPassword) {
                    showError(confirmPasswordError, 'Passwords do not match');
                    isValid = false;
                }

                if (!agreeTerms) {
                    // Show error for terms agreement
                    isValid = false;
                    alert('Please agree to the Terms of Service and Privacy Policy to continue.');
                }
                
                if (isValid) {
                    // Show loading state
                    signupBtn.disabled = true;
                    btnText.style.opacity = '0';
                    btnLoader.style.display = 'flex';
                    
                    // Prepare form data
                    const formData = {
                        firstName,
                        lastName,
                        email,
                        company: company || null,
                        password,
                        agreeTerms,
                        newsletter: document.getElementById('newsletter').checked
                    };
                    
                    try {
                        // Make API call
                        const response = await fetch(`${API_BASE_URL}/signup`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(formData)
                        });
                        
                        const data = await response.json();
                        
                        // Reset button state
                        signupBtn.disabled = false;
                        btnText.style.opacity = '1';
                        btnLoader.style.display = 'none';
                        
                        if (response.ok && data.success) {
                            // Reset form
                            signupForm.reset();
                            
                            // Show success message
                            showSuccessMessage(data.message || 'Account created successfully! Welcome to EclipseAI.');
                            
                            // Store user data in localStorage for future use
                            localStorage.setItem('user', JSON.stringify(data.user));
                            
                            // Redirect to home page after a delay
                            setTimeout(() => {
                                window.location.href = 'index.html';
                            }, 2000);
                        } else {
                            // Show error message
                            showErrorMessage(data.error || 'Failed to create account. Please try again.');
                        }
                    } catch (error) {
                        console.error('Signup error:', error);
                        
                        // Reset button state
                        signupBtn.disabled = false;
                        btnText.style.opacity = '1';
                        btnLoader.style.display = 'none';
                        
                        // Show specific error message based on error type
                        if (error.name === 'TypeError' && error.message.includes('fetch')) {
                            showErrorMessage('Server is not running. Please start the server by running "start-server.bat" or "npm start" in the server folder.');
                        } else {
                            showErrorMessage('Network error. Please check your connection and try again.');
                        }
                    }
                }
            });

            function showSuccessMessage(message) {
                const successDiv = document.createElement('div');
                successDiv.className = 'success-message';
                successDiv.textContent = message;
                successDiv.style.cssText = `
                    position: fixed;
                    top: 100px;
                    right: 20px;
                    background: linear-gradient(135deg, #10b981, #059669);
                    color: white;
                    padding: 16px 24px;
                    border-radius: 8px;
                    box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
                    z-index: 10000;
                    transform: translateX(400px);
                    transition: transform 0.3s ease;
                    font-weight: 500;
                `;
                
                document.body.appendChild(successDiv);
                
                // Animate in
                setTimeout(() => {
                    successDiv.style.transform = 'translateX(0)';
                }, 100);
                
                // Remove after 4 seconds
                setTimeout(() => {
                    successDiv.style.transform = 'translateX(400px)';
                    setTimeout(() => {
                        if (document.body.contains(successDiv)) {
                            document.body.removeChild(successDiv);
                        }
                    }, 300);
                }, 4000);
            }

            function showErrorMessage(message) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.textContent = message;
                errorDiv.style.cssText = `
                    position: fixed;
                    top: 100px;
                    right: 20px;
                    background: linear-gradient(135deg, #ef4444, #dc2626);
                    color: white;
                    padding: 16px 24px;
                    border-radius: 8px;
                    box-shadow: 0 10px 25px rgba(239, 68, 68, 0.3);
                    z-index: 10000;
                    transform: translateX(400px);
                    transition: transform 0.3s ease;
                    font-weight: 500;
                `;
                
                document.body.appendChild(errorDiv);
                
                // Animate in
                setTimeout(() => {
                    errorDiv.style.transform = 'translateX(0)';
                }, 100);
                
                // Remove after 5 seconds
                setTimeout(() => {
                    errorDiv.style.transform = 'translateX(400px)';
                    setTimeout(() => {
                        if (document.body.contains(errorDiv)) {
                            document.body.removeChild(errorDiv);
                        }
                    }, 300);
                }, 5000);
            }

            // Social login buttons
            const socialBtns = document.querySelectorAll('.social-btn');
            socialBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const provider = this.classList.contains('google-btn') ? 'Google' : 'Microsoft';
                    showSuccessMessage(`Redirecting to ${provider} authentication...`);
                });
            });

            // Add ripple effect to buttons
            const buttons = document.querySelectorAll('.login-btn, .social-btn');
            buttons.forEach(button => {
                button.addEventListener('click', function(e) {
                    const ripple = document.createElement('span');
                    const rect = this.getBoundingClientRect();
                    const size = Math.max(rect.width, rect.height);
                    const x = e.clientX - rect.left - size / 2;
                    const y = e.clientY - rect.top - size / 2;
                    
                    ripple.style.cssText = `
                        position: absolute;
                        width: ${size}px;
                        height: ${size}px;
                        left: ${x}px;
                        top: ${y}px;
                        background: rgba(255, 255, 255, 0.3);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                        pointer-events: none;
                        z-index: 1000;
                    `;
                    
                    this.style.position = 'relative';
                    this.style.overflow = 'hidden';
                    this.appendChild(ripple);
                    
                    setTimeout(() => ripple.remove(), 600);
                });
            });

            // Add CSS for animations
            const signupStyle = document.createElement('style');
            signupStyle.textContent = `
                @keyframes ripple {
                    to {
                        transform: scale(4);
                        opacity: 0;
                    }
                }
                
                .spinner {
                    width: 20px;
                    height: 20px;
                    border: 2px solid rgba(255, 255, 255, 0.3);
                    border-top: 2px solid white;
                    border-radius: 50%;
                    animation: spin 1s linear infinite;
                }
                
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                
                .floating-icon {
                    position: absolute;
                    color: rgba(96, 165, 250, 0.1);
                    font-size: 3rem;
                    animation: float 6s ease-in-out infinite;
                    pointer-events: none;
                }
                
                .icon-1 {
                    top: 20%;
                    left: 10%;
                    animation-delay: 0s;
                }
                
                .icon-2 {
                    top: 60%;
                    right: 15%;
                    animation-delay: 2s;
                }
                
                .icon-3 {
                    bottom: 30%;
                    left: 20%;
                    animation-delay: 4s;
                }
                
                .icon-4 {
                    top: 40%;
                    right: 30%;
                    animation-delay: 1s;
                }
                
                @keyframes float {
                    0%, 100% {
                        transform: translateY(0px) rotate(0deg);
                    }
                    50% {
                        transform: translateY(-20px) rotate(5deg);
                    }
                }
                
                .input-container:focus-within {
                    border-color: var(--accent-blue-bright);
                    box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.1);
                }
                
                .form-input:focus {
                    outline: none;
                    border-color: var(--accent-blue-bright);
                }
                
                .checkbox-container input:checked + .checkmark {
                    background: var(--accent-blue-bright);
                    border-color: var(--accent-blue-bright);
                }
                
                .checkbox-container input:checked + .checkmark::after {
                    opacity: 1;
                    transform: rotate(45deg) scale(1);
                }
                
                .social-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
                }
                
                .login-btn:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 12px 30px rgba(96, 165, 250, 0.3);
                }
                
                .login-btn:disabled {
                    opacity: 0.7;
                    cursor: not-allowed;
                    transform: none;
                }
            `;
            document.head.appendChild(signupStyle);
        });
    </script>
</body>
</html>
